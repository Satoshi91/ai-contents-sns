
> ai-contents-sns@0.1.0 dev
> next dev

 ‚ö† Warning: Found multiple lockfiles. Selecting /home/toppo/package-lock.json.
   Consider removing the lockfiles at:
   * /home/toppo/dev/canvas/ai-contents-sns/package-lock.json

 ‚ö† Port 3000 is in use by an unknown process, using available port 3001 instead.
   ‚ñ≤ Next.js 15.4.5
   - Local:        http://localhost:3001
   - Network:      http://10.255.255.254:3001
   - Environments: .env.local

 ‚úì Starting...
 ‚úì Ready in 2.3s
 ‚óã Compiling /api/chat ...
 ‚úì Compiled /api/chat in 1927ms (437 modules)
üöÄ [API] ===== CHAT REQUEST START =====
üöÄ [API] ===== CHAT REQUEST START =====
üì® [API] Messages received: [
  {
    "id": "test",
    "role": "user",
    "parts": [
      {
        "type": "text",
        "text": "Hello test"
      }
    ]
  }
]
üì® [API] Messages received: [
  {
    "id": "test",
    "role": "user",
    "parts": [
      {
        "type": "text",
        "text": "Hello test"
      }
    ]
  }
]
üîÑ [API] Converted to core messages: [
  {
    "role": "user",
    "content": [
      {
        "type": "text",
        "text": "Hello test"
      }
    ]
  }
]
üîÑ [API] Converted to core messages: [
  {
    "role": "user",
    "content": [
      {
        "type": "text",
        "text": "Hello test"
      }
    ]
  }
]
üîß [API] Configuration:
üîß [API] Configuration:
  Model: openai/gpt-4o-mini
  Model: openai/gpt-4o-mini
  API Key present: true
  API Key present: true
  API Key prefix: sk-or-v1-6...
  API Key prefix: sk-or-v1-6...
  OpenRouter URL: https://openrouter.ai/api/v1
  OpenRouter URL: https://openrouter.ai/api/v1
ü§ñ [API] Calling streamText...
ü§ñ [API] Calling streamText...
‚úÖ [API] streamText completed successfully
‚úÖ [API] streamText completed successfully
üìä [API] Result object properties: _totalUsage, _finishReason, _steps, output, includeRawChunks, tools, addStream, closeStream, baseStream
üìä [API] Result object properties: _totalUsage, _finishReason, _steps, output, includeRawChunks, tools, addStream, closeStream, baseStream
üåê [OpenRouter] Request: {
  url: 'https://openrouter.ai/api/v1/responses',
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    Authorization: 'Bearer sk-or-v1-6cae...'
  },
  body: {
    model: 'openai/gpt-4o-mini',
    input: [ [Object], [Object] ],
    stream: true
  }
}
üåê [OpenRouter] Response: {
  status: 200,
  statusText: 'OK',
  headers: {
    'access-control-allow-headers': 'Authorization, User-Agent, X-Api-Key, X-CSRF-Token, X-Requested-With, Accept, Accept-Version, Content-Length, Content-MD5, Content-Type, Date, X-Api-Version, HTTP-Referer, X-Windowai-Title, X-Openrouter-Title, X-Title, X-Stainless-Lang, X-Stainless-Package-Version, X-Stainless-OS, X-Stainless-Arch, X-Stainless-Runtime, X-Stainless-Runtime-Version, X-Stainless-Retry-Count, Protection-Key',
    'access-control-allow-methods': 'GET,OPTIONS,PATCH,DELETE,POST,PUT',
    'access-control-allow-origin': '*',
    'cache-control': 'private, no-cache, no-store, max-age=0, must-revalidate',
    'cf-cache-status': 'DYNAMIC',
    'cf-ray': '96dc3caa5dc8963a-KIX',
    connection: 'keep-alive',
    'content-encoding': 'gzip',
    'content-security-policy': "default-src 'self'; script-src 'self' 'unsafe-eval' 'unsafe-inline' https://basehub.com https://*.pusher.com https://clerk.openrouter.ai https://challenges.cloudflare.com https://checkout.stripe.com https://connect-js.stripe.com https://js.stripe.com https://maps.googleapis.com https://www.googletagmanager.com 'wasm-unsafe-eval' https://*.us5.datadoghq.com https://cdn.jsdelivr.net https://*.algolia.net https://*.algolianet.com https://app.buildwithfern.com https://prod.ferndocs.com https://cdn.segment.com https://jobs.ashbyhq.com https://*.posthog.com; connect-src 'self' https://basehub.com https://aws.basehub.com https://*.pusher.com wss://*.pusher.com https://clerk.openrouter.ai https://checkout.stripe.com https://api.stripe.com https://maps.googleapis.com *.google-analytics.com https://www.googletagmanager.com https://raw.githubusercontent.com wss://www.walletlink.org/rpc https://static.cloudflareinsights.com https://*.us5.datadoghq.com https://*.algolia.net https://*.algolianet.com https://app.buildwithfern.com https://prod.ferndocs.com https://api.segment.io https://cdn.segment.com https://www.openrouter.ai https://openrouter.ai https://jobs.ashbyhq.com https://api.ashbyhq.com/ https://*.posthog.com; frame-src 'self' https://basehub.com https://*.pusher.com https://challenges.cloudflare.com https://checkout.stripe.com https://connect-js.stripe.com https://js.stripe.com https://hooks.stripe.com https://us5.datadoghq.com https://openrouter.notion.site https://*.us5.datadoghq.com https://app.buildwithfern.com https://prod.ferndocs.com https://jobs.ashbyhq.com; img-src 'self' data: blob: https://basehub.com https://*.basehub.com https://*.pusher.com https://img.clerk.com https://*.stripe.com https://www.googletagmanager.com https://t0.gstatic.com https://*.algolia.io https://files.buildwithfern.com https://icons.ferndocs.com; worker-src 'self' blob: data:; style-src 'self' 'unsafe-inline' sha256-0hAheEzaMe6uXIKV4EehS9pu1am1lj/KnnzrOYqckXk= https://cdn.jsdelivr.net https://app.buildwithfern.com https://prod.ferndocs.com https://jobs.ashbyhq.com; frame-ancestors 'self'; font-src 'self' https://cdn.jsdelivr.net; upgrade-insecure-requests",
    'content-type': 'text/html; charset=utf-8',
    date: 'Tue, 12 Aug 2025 01:35:36 GMT',
    link: '</_next/static/media/5b01f339abf2f1a5.p.woff2>; rel=preload; as="font"; crossorigin=""; type="font/woff2", </_next/static/media/e4af272ccee01ff0-s.p.woff2>; rel=preload; as="font"; crossorigin=""; type="font/woff2"',
    'permissions-policy': 'payment=(self "https://checkout.stripe.com" "https://connect-js.stripe.com" "https://js.stripe.com" "https://*.js.stripe.com" "https://hooks.stripe.com")',
    'referrer-policy': 'no-referrer, strict-origin-when-cross-origin',
    server: 'cloudflare',
    'strict-transport-security': 'max-age=63072000',
    'transfer-encoding': 'chunked',
    vary: 'RSC, Next-Router-State-Tree, Next-Router-Prefetch, Next-Router-Segment-Prefetch, accept-encoding',
    'x-content-type-options': 'nosniff',
    'x-frame-options': 'SAMEORIGIN',
    'x-matched-path': '/[maker-id]/[slug]/[tab]',
    'x-powered-by': 'Next.js',
    'x-vercel-cache': 'MISS',
    'x-vercel-id': 'kix1::sin1::zgc94-1754962536071-252c78610881'
  }
}
 POST /api/chat 200 in 3158ms
 ‚úì Compiled in 726ms (251 modules)
 ‚úì Compiled in 375ms (186 modules)
 ‚úì Compiled in 159ms (186 modules)
 ‚úì Compiled in 241ms (186 modules)
